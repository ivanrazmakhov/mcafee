<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>McAfee — тестовый лендинг</title>

  <meta name="description" content="Безопасность в один клик. Нажмите кнопку, чтобы перейти к специальному предложению." />
  <meta property="og:title" content="McAfee — тестовый лендинг" />
  <meta property="og:description" content="Безопасность в один клик. Нажмите кнопку, чтобы перейти к специальному предложению." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://lp.mcafee-software-solutions.online/" />

  <style>
    :root { --bg:#0b0c0f; --card:#11131a; --text:#e9eef5; --muted:#97a2b0; --accent:#39c07d; }
    * { box-sizing: border-box; }
    html,body { margin:0; padding:0; background:var(--bg); color:var(--text); font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; }
    .wrap { max-width: 840px; margin: 0 auto; padding: 32px 20px 80px; }
    .card { background: var(--card); border-radius: 16px; padding: 28px; box-shadow: 0 8px 24px rgba(0,0,0,.35); }
    h1 { margin: 0 0 12px; font-size: 28px; }
    p.lead { margin: 0 0 20px; color: var(--muted); }
    .btn { display:inline-block; padding:14px 20px; border-radius:12px; background:var(--accent); color:#08110b; text-decoration:none; font-weight:700; }
    .btn[disabled] { opacity:.55; pointer-events:none; }
    .note { margin-top: 14px; font-size: 14px; color: var(--muted); }
    .kbd { display:inline-block; border:1px solid #2b2f3a; border-bottom-width:2px; padding:0 6px; border-radius:6px; background:#0f1219; color:#d2d9e3; font-size:12px; }
  </style>

  <script>
    // Берём всю текущую query-строку (включая _subid и _token), без вопросительного знака
    function currentQuery() {
      return window.location.search ? window.location.search.substring(1) : "";
    }

    function hasVisitParams() {
      const sp = new URLSearchParams(window.location.search);
      return sp.has('_subid') && sp.has('_token');
    }

    function goThroughKeitaro(e) {
      if (e && e.preventDefault) e.preventDefault();

      // Если визит пришёл корректно (есть _subid и _token) — отправляем на трекер через флаг _lp=1
      if (hasVisitParams()) {
        var qs = currentQuery();
        var glue = qs ? '&' : '';
        var clickUrl = 'https://trk.mcafee-software-solutions.online/?_lp=1' + glue + qs;
        window.location.href = clickUrl;
        return;
      }

      // Если LP открыли напрямую — вернём человека на Campaign URL, Keitaro сам добавит параметры визита
      window.location.href = 'https://trk.mcafee-software-solutions.online/Nz7Bb9';
    }

    // Подставим правильный href в кнопку на всякий случай (чтобы работало и без onclick)
    document.addEventListener('DOMContentLoaded', function () {
      var btn = document.getElementById('offer-btn');
      if (!btn) return;

      if (hasVisitParams()) {
        var qs = currentQuery();
        var glue = qs ? '&' : '';
        btn.setAttribute('href', 'https://trk.mcafee-software-solutions.online/?_lp=1' + glue + qs);
      } else {
        btn.setAttribute('href', 'https://trk.mcafee-software-solutions.online/Nz7Bb9');
      }
    });
  </script>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>McAfee — безопаснее вместе</h1>
      <p class="lead">Нажмите кнопку ниже, чтобы перейти к специальному предложению.</p>

      <a id="offer-btn" class="btn" href="#" onclick="goThroughKeitaro(event)">Получить McAfee</a>

      <p class="note">
        Если кнопка не ведёт на оффер, откройте страницу по ссылке кампании Keitaro —
        <span class="kbd">https://trk.mcafee-software-solutions.online/Nz7Bb9</span>
      </p>

      <noscript>
        <p class="note">Для корректной работы включите JavaScript. Без него клик-трекинг не сработает.</p>
      </noscript>
    </div>
  </div>
</body>
</html>
